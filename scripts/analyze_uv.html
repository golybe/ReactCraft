<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UV Analyzer - Minecraft Sheep Head</title>
  <style>
    body {
      font-family: 'Courier New', monospace;
      background: #1a1a1a;
      color: #e0e0e0;
      padding: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }

    h1 {
      color: #4caf50;
      border-bottom: 2px solid #4caf50;
      padding-bottom: 10px;
    }

    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    .panel {
      background: #2a2a2a;
      border: 1px solid #444;
      border-radius: 8px;
      padding: 15px;
    }

    .panel h2 {
      margin-top: 0;
      color: #81c784;
      font-size: 16px;
    }

    canvas {
      border: 2px solid #555;
      border-radius: 4px;
      image-rendering: pixelated;
      cursor: crosshair;
    }

    .info {
      background: #363636;
      padding: 10px;
      border-radius: 4px;
      margin-top: 10px;
      font-size: 12px;
    }

    .uv-box {
      fill: rgba(76, 175, 80, 0.3);
      stroke: #4caf50;
      stroke-width: 1;
    }

    .uv-label {
      fill: #4caf50;
      font-size: 10px;
      font-weight: bold;
    }

    .coords {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 5px;
      font-size: 12px;
      margin-top: 10px;
    }

    .coord-label {
      color: #888;
    }

    .coord-value {
      color: #4caf50;
      font-weight: bold;
    }

    .controls {
      margin-bottom: 15px;
    }

    button {
      background: #4caf50;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
      font-family: inherit;
    }

    button:hover {
      background: #45a049;
    }

    .layout-option {
      background: #2196f3;
    }

    .layout-option:hover {
      background: #1976d2;
    }

    #codeOutput {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 11px;
      overflow-x: auto;
      white-space: pre;
    }

    .highlight {
      color: #ffeb3b;
    }
  </style>
</head>
<body>
  <h1>üîç UV Analyzer - Minecraft Sheep Head</h1>

  <div class="controls">
    <button onclick="setStandardLayout()">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Layout (Right‚ÜíFront‚ÜíLeft‚ÜíBack)</button>
    <button class="layout-option" onclick="setAlternativeLayout()">–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π Layout (Front‚ÜíRight‚ÜíLeft‚ÜíBack)</button>
    <button onclick="showCoordinates()">–ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º—ã—à–∏</button>
  </div>

  <div class="container">
    <div class="panel">
      <h2>–¢–µ–∫—Å—Ç—É—Ä–∞ —Å —Ä–∞–∑–º–µ—Ç–∫–æ–π UV</h2>
      <svg id="textureSvg" width="512" height="256"></svg>
      <div class="info">
        <strong>–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç—É—Ä—ã:</strong> 64√ó32 –ø–∏–∫—Å–µ–ª–µ–π<br>
        <strong>–†–∞–∑–º–µ—Ä –≥–æ–ª–æ–≤—ã:</strong> 6√ó6√ó6 –ø–∏–∫—Å–µ–ª–µ–π
      </div>
    </div>

    <div class="panel">
      <h2>UV –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</h2>
      <div id="coordsDisplay" class="coords"></div>
      <div class="info" id="mouseInfo">–ù–∞–≤–µ–¥–∏ –º—ã—à—å –Ω–∞ —Ç–µ–∫—Å—Ç—É—Ä—É</div>
    </div>
  </div>

  <div class="panel" style="margin-top: 20px;">
    <h2>–ö–æ–¥ –¥–ª—è createMobHeadBox</h2>
    <div id="codeOutput"></div>
  </div>

  <script>
    const textureSize = { width: 64, height: 32 };
    const headSize = { width: 6, height: 6, depth: 6 };
    const scale = 8; // –ú–∞—Å—à—Ç–∞–± –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

    let currentLayout = 'standard';

    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π layout: Right ‚Üí Front ‚Üí Left ‚Üí Back
    const layouts = {
      standard: {
        RIGHT: { u: 0, v: 6, w: 6, h: 6, name: 'Right (–ü—Ä–∞–≤–∞—è —â–µ–∫–∞)' },
        FRONT: { u: 6, v: 6, w: 6, h: 6, name: 'Front (–õ–∏—Ü–æ)' },
        LEFT: { u: 12, v: 6, w: 6, h: 6, name: 'Left (–õ–µ–≤–∞—è —â–µ–∫–∞)' },
        BACK: { u: 18, v: 6, w: 6, h: 6, name: 'Back (–ó–∞—Ç—ã–ª–æ–∫)' },
        TOP: { u: 6, v: 0, w: 6, h: 6, name: 'Top (–í–µ—Ä—Ö –≥–æ–ª–æ–≤—ã)' },
        BOTTOM: { u: 12, v: 0, w: 6, h: 6, name: 'Bottom (–ù–∏–∑ –≥–æ–ª–æ–≤—ã)' }
      },
      alternative: {
        FRONT: { u: 0, v: 6, w: 6, h: 6, name: 'Front (–õ–∏—Ü–æ)' },
        RIGHT: { u: 6, v: 6, w: 6, h: 6, name: 'Right (–ü—Ä–∞–≤–∞—è —â–µ–∫–∞)' },
        LEFT: { u: 12, v: 6, w: 6, h: 6, name: 'Left (–õ–µ–≤–∞—è —â–µ–∫–∞)' },
        BACK: { u: 18, v: 6, w: 6, h: 6, name: 'Back (–ó–∞—Ç—ã–ª–æ–∫)' },
        TOP: { u: 6, v: 0, w: 6, h: 6, name: 'Top (–í–µ—Ä—Ö –≥–æ–ª–æ–≤—ã)' },
        BOTTOM: { u: 12, v: 0, w: 6, h: 6, name: 'Bottom (–ù–∏–∑ –≥–æ–ª–æ–≤—ã)' }
      }
    };

    function init() {
      const svg = document.getElementById('textureSvg');
      const img = new Image();

      img.onload = function() {
        // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç—É—Ä—É
        const canvas = document.createElement('canvas');
        canvas.width = textureSize.width * scale;
        canvas.height = textureSize.height * scale;
        const ctx = canvas.getContext('2d');
        ctx.imageSmoothingEnabled = false;
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

        // –°–æ–∑–¥–∞—ë–º SVG image
        const svgImg = document.createElementNS('http://www.w3.org/2000/svg', 'image');
        svgImg.setAttribute('href', canvas.toDataURL());
        svgImg.setAttribute('width', canvas.width);
        svgImg.setAttribute('height', canvas.height);
        svg.appendChild(svgImg);

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –º—ã—à–∏
        svg.addEventListener('mousemove', handleMouseMove);
        svg.addEventListener('click', handleClick);

        // –†–∏—Å—É–µ–º —Ä–∞–∑–º–µ—Ç–∫—É
        drawUVBoxes();

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
        updateCoordsDisplay();
      };

      img.src = '/textures/entity/sheep.png';

      // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
      img.onerror = function() {
        const svg = document.getElementById('textureSvg');
        svg.innerHTML = `
          <rect width="512" height="256" fill="#333"/>
          <text x="256" y="128" text-anchor="middle" fill="#666" font-size="20">
            –¢–µ–∫—Å—Ç—É—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
            public/textures/entity/sheep.png
          </text>
        `;
        drawUVBoxes();
        updateCoordsDisplay();
      };
    }

    function drawUVBoxes() {
      const svg = document.getElementById('textureSvg');
      const layout = layouts[currentLayout];

      // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –±–æ–∫—Å—ã
      svg.querySelectorAll('.uv-box, .uv-label').forEach(el => el.remove());

      // –†–∏—Å—É–µ–º –Ω–æ–≤—ã–µ
      for (const [face, data] of Object.entries(layout)) {
        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        rect.setAttribute('class', 'uv-box');
        rect.setAttribute('x', data.u * scale);
        rect.setAttribute('y', data.v * scale);
        rect.setAttribute('width', data.w * scale);
        rect.setAttribute('height', data.h * scale);
        svg.appendChild(rect);

        const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        label.setAttribute('class', 'uv-label');
        label.setAttribute('x', data.u * scale + 2);
        label.setAttribute('y', data.v * scale + 12);
        label.textContent = face.substring(0, 1);
        svg.appendChild(label);
      }
    }

    function updateCoordsDisplay() {
      const display = document.getElementById('coordsDisplay');
      const layout = layouts[currentLayout];

      let html = '';
      for (const [face, data] of Object.entries(layout)) {
        html += `
          <div class="coord-label">${data.name}:</div>
          <div class="coord-value">rectUV(${data.u}, ${data.v}, ${data.w}, ${data.h})</div>
        `;
      }
      display.innerHTML = html;

      // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥
      updateCodeOutput();
    }

    function updateCodeOutput() {
      const output = document.getElementById('codeOutput');
      const layout = layouts[currentLayout];

      let code = `// UV Layout: ${currentLayout === 'standard' ? 'Standard (Right‚ÜíFront‚ÜíLeft‚ÜíBack)' : 'Alternative (Front‚ÜíRight‚ÜíLeft‚ÜíBack)'}\n\n`;
      code += `const texU = 0, texV = 0;\nconst depth = ${headSize.depth}, width = ${headSize.width};\n\n`;

      for (const [face, data] of Object.entries(layout)) {
        const uvName = 'UV_' + face;
        let formula = '';

        if (currentLayout === 'standard') {
          // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π layout
          if (face === 'RIGHT') formula = 'texU';
          else if (face === 'FRONT') formula = 'texU + depth';
          else if (face === 'LEFT') formula = 'texU + depth + width';
          else if (face === 'BACK') formula = 'texU + depth + width + depth';
          else if (face === 'TOP') formula = 'texU + depth';
          else if (face === 'BOTTOM') formula = 'texU + depth + width';
        } else {
          // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π layout
          if (face === 'FRONT') formula = 'texU';
          else if (face === 'RIGHT') formula = 'texU + width';
          else if (face === 'LEFT') formula = 'texU + width + depth';
          else if (face === 'BACK') formula = 'texU + width + depth * 2';
          else if (face === 'TOP') formula = 'texU + width';
          else if (face === 'BOTTOM') formula = 'texU + width + depth';
        }

        code += `const ${uvName.padEnd(10)} = rectUV(<span class="highlight">${formula}</span>, texV + ${data.v}, ${data.w}, ${data.h});\n`;
      }

      output.innerHTML = code;
    }

    function handleMouseMove(e) {
      const svg = e.target.closest('svg');
      const rect = svg.getBoundingClientRect();
      const x = Math.floor((e.clientX - rect.left) / scale);
      const y = Math.floor((e.clientY - rect.top) / scale);

      const info = document.getElementById('mouseInfo');
      info.innerHTML = `–ü–∏–∫—Å–µ–ª—å: <span class="coord-value">(${x}, ${y})</span>`;

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ø–∞–ª–∏ –ª–∏ –≤ –∫–∞–∫–æ–π-—Ç–æ –±–æ–∫—Å
      const layout = layouts[currentLayout];
      for (const [face, data] of Object.entries(layout)) {
        if (x >= data.u && x < data.u + data.w && y >= data.v && y < data.v + data.h) {
          info.innerHTML += `<br><span class="highlight">${data.name}</span>`;
          break;
        }
      }
    }

    function handleClick(e) {
      const svg = e.target.closest('svg');
      const rect = svg.getBoundingClientRect();
      const x = Math.floor((e.clientX - rect.left) / scale);
      const y = Math.floor((e.clientY - rect.top) / scale);

      console.log(`Clicked pixel: (${x}, ${y})`);
      alert(`–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–∏–∫—Å–µ–ª—è: (${x}, ${y})\n\n–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ UV!`);
    }

    function setStandardLayout() {
      currentLayout = 'standard';
      drawUVBoxes();
      updateCoordsDisplay();
    }

    function setAlternativeLayout() {
      currentLayout = 'alternative';
      drawUVBoxes();
      updateCoordsDisplay();
    }

    function showCoordinates() {
      alert('–ù–∞–≤–µ–¥–∏ –º—ã—à—å –Ω–∞ —Ç–µ–∫—Å—Ç—É—Ä—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–∏–∫—Å–µ–ª—è.\n\n–ö–ª–∏–∫–Ω–∏, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –∫–æ–Ω—Å–æ–ª—å.');
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    init();
  </script>
</body>
</html>
